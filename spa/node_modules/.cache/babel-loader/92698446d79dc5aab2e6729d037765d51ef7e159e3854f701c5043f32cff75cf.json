{"ast":null,"code":"import{createContext,useState}from\"react\";import toast from\"react-hot-toast\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthContextProvider=_ref=>{let{children}=_ref;const[userToken,setUserToken]=useState(\"\");const[userData,setUserData]=useState(\"\");const[userEmail,setUserEmail]=useState(\"\");const navigate=useNavigate();const checkLogin=path=>{const verifyEmail=localStorage.getItem(\"verifyEmail\");const token=localStorage.getItem(\"accessToken\");if(!token&&!verifyEmail){navigate(path||'/login');return;}if(token){updateUserToken(token);navigate(\"/garden/registration\");return;}if(verifyEmail){navigate(\"/email-verification\");return;}updateUserToken(\"\");navigate(path||\"/login\");};const Logout=()=>{toast.success(\"Logout Successful!\");localStorage.clear();navigate(\"/home\");};const getUserData=()=>{if(userData){return userData;}const user=localStorage.getItem(\"currentUser\");return user;};const updateUserData=info=>{setUserData(info);};const updateUserToken=info=>{setUserToken(info);};const updateUserEmail=info=>{setUserEmail(info);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{userData,userToken,userEmail,updateUserToken,updateUserData,checkLogin,updateUserEmail,getUserData,Logout},children:children});};","map":{"version":3,"names":["createContext","useState","toast","useNavigate","jsx","_jsx","AuthContext","AuthContextProvider","_ref","children","userToken","setUserToken","userData","setUserData","userEmail","setUserEmail","navigate","checkLogin","path","verifyEmail","localStorage","getItem","token","updateUserToken","Logout","success","clear","getUserData","user","updateUserData","info","updateUserEmail","Provider","value"],"sources":["D:/dev/spa/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [userToken, setUserToken] = useState(\"\");\r\n  const [userData, setUserData] = useState(\"\");\r\n  const [userEmail, setUserEmail] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const checkLogin = (path) => {\r\n    const verifyEmail = localStorage.getItem(\"verifyEmail\");\r\n    const token = localStorage.getItem(\"accessToken\");\r\n    if (!token && !verifyEmail) {\r\n      navigate(path || '/login');\r\n      return;\r\n    }\r\n    if (token) {\r\n      updateUserToken(token);\r\n      navigate(\"/garden/registration\");\r\n      return;\r\n    }\r\n    if (verifyEmail) {\r\n      navigate(\"/email-verification\");\r\n      return;\r\n    }\r\n    updateUserToken(\"\");\r\n    navigate(path || \"/login\");\r\n  };\r\n\r\n  const Logout = () => {\r\n    toast.success(\"Logout Successful!\");\r\n    localStorage.clear();\r\n    navigate(\"/home\");\r\n  };\r\n\r\n  const getUserData = () => {\r\n    if (userData) {\r\n      return userData;\r\n    }\r\n    const user = localStorage.getItem(\"currentUser\");\r\n    return user;\r\n  };\r\n\r\n  const updateUserData = (info) => {\r\n    setUserData(info);\r\n  };\r\n\r\n  const updateUserToken = (info) => {\r\n    setUserToken(info);\r\n  };\r\n\r\n  const updateUserEmail = (info) => {\r\n    setUserEmail(info);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        userData,\r\n        userToken,\r\n        userEmail,\r\n        updateUserToken,\r\n        updateUserData,\r\n        checkLogin,\r\n        updateUserEmail,\r\n        getUserData,\r\n        Logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAO,mBAAmB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC9C,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAAe,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAc,UAAU,CAAIC,IAAI,EAAK,CAC3B,KAAM,CAAAC,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CACvD,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CACjD,GAAI,CAACC,KAAK,EAAI,CAACH,WAAW,CAAE,CAC1BH,QAAQ,CAACE,IAAI,EAAI,QAAQ,CAAC,CAC1B,OACF,CACA,GAAII,KAAK,CAAE,CACTC,eAAe,CAACD,KAAK,CAAC,CACtBN,QAAQ,CAAC,sBAAsB,CAAC,CAChC,OACF,CACA,GAAIG,WAAW,CAAE,CACfH,QAAQ,CAAC,qBAAqB,CAAC,CAC/B,OACF,CACAO,eAAe,CAAC,EAAE,CAAC,CACnBP,QAAQ,CAACE,IAAI,EAAI,QAAQ,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACnBtB,KAAK,CAACuB,OAAO,CAAC,oBAAoB,CAAC,CACnCL,YAAY,CAACM,KAAK,CAAC,CAAC,CACpBV,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAED,KAAM,CAAAW,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAIf,QAAQ,CAAE,CACZ,MAAO,CAAAA,QAAQ,CACjB,CACA,KAAM,CAAAgB,IAAI,CAAGR,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAChD,MAAO,CAAAO,IAAI,CACb,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,IAAI,EAAK,CAC/BjB,WAAW,CAACiB,IAAI,CAAC,CACnB,CAAC,CAED,KAAM,CAAAP,eAAe,CAAIO,IAAI,EAAK,CAChCnB,YAAY,CAACmB,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAC,eAAe,CAAID,IAAI,EAAK,CAChCf,YAAY,CAACe,IAAI,CAAC,CACpB,CAAC,CAED,mBACEzB,IAAA,CAACC,WAAW,CAAC0B,QAAQ,EACnBC,KAAK,CAAE,CACLrB,QAAQ,CACRF,SAAS,CACTI,SAAS,CACTS,eAAe,CACfM,cAAc,CACdZ,UAAU,CACVc,eAAe,CACfJ,WAAW,CACXH,MACF,CAAE,CAAAf,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}